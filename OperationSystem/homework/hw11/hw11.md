---
title: OS Homework11
---


# 操作系统 作业11

* 王华强
* 2016K8009929035

***

## 1. 磁盘的平均寻道时间是 4ms，旋转速度是 7200 RPM (即每分钟 7200 转), 它的每条 磁道有 500 个扇区，每个扇区 512 字节。

> 1) 请问它的最大数据传输速率是多少字节/秒?
> 2) 读一个扇区的平均时间是多少毫秒(ms)?
> 3) 如果它的密度增加一倍，即每条磁道有 1000 个扇区，每个扇区仍然是 512 字节

### 1.1

在无需寻道全程进行数据读写的情况下:

$$7200/60\times 500\times 512=‭30720000‬ Bps$$

### 1.2


加入寻道时间, 平均旋转时间:

$$1s/(7200/60)/500+4ms+1s/(7200/60)*(1/2)=8.183ms$$

### 1.3

最大数据传输速率:在无需寻道全程进行数据读写的情况下:

$$7200/60\times 1000\times 512=‭61440000‬ Bps$$

读一个扇区的平均时间:

$$1s/120/1000+4ms+1s/(7200/60)*(1/2)=8.175ms$$

## 2. 
<!-- 
16head
400cylinder
4-100cyl-zone
160
200
240
280
sector:512B
seekadj:1ms
7200rpm -->

### 2.a disk capacity

$$16*100*(160+200+240+280)*512=720896000 BYTE$$

### 2.b optimal track skew

最优的情况发生在磁头向着磁道上扇区数最少的区域移动时:

$$1*(7200/60)/1000*160=19.2$$

### 2.c maximum data transfer rate

在无需寻道, 16个磁头可以并行读取的情况下:

$$16*280*512*7200/60=275251200Bps$$

若不能并行读取:

$$16*280*512*7200/60=17203200Bps$$

### 2.d avg sector read time

<!-- avg find track time:

$$$$ -->

不考虑寻道和磁头旋转的情况下:

$$
1/(7200/60)/(160)/4+
1/(7200/60)/(200)/4+
$$
$$
1/(7200/60)/(240)/4+
1/(7200/60)/(280)/4=
$$

$$3.96e-2ms$$

要考虑磁头旋转只需要加上$(1/(7200/60)*(1/2))s=4.17ms$
<!-- 考虑寻道的情况下:

$$$$ -->

## 3. 寻道时间计算

### 3.a

cylinder|10|22|20|2|40|6|38
-|-|-|-|-|-|-|-
到达这里的寻道间隔|10|12|2|18|38|34|32

共计:146

时间:876ms

### 3.b

cylinder|20|22|10|6|2|38|40
-|-|-|-|-|-|-|-
到达这里的寻道间隔|0|2|12|4|4|36|2

共计:60

时间:360ms


### 3.c

cylinder|20|22|38|40|10|6|2
-|-|-|-|-|-|-|-
到达这里的寻道间隔|0|2|16|2|30|4|4

共计:58

时间:348ms

## 4. 随机读情况下的电梯算法

### 可能原因1

进行10000个随机数据的读写时, 硬盘的实际性能受到硬盘操作排序缓冲大小的限制. 这里所指的硬盘操作排序缓冲, 是用于保存电梯算法所需的位置信息的硬件. 

对于Unix操作系统, 其对于数据的访问有良好的规律性, 即使是在小范围内(与排序缓冲大小类似的范围)也是如此. 因此使用电梯算法可以避免FCFS的震荡现象.

然而对于10000个数的随机读取, 硬盘控制器的排序缓冲不能缓冲所有的数据, 因此只能针对有限的数据进行排序. 在缓冲区较小的情况下, 电梯算法同样会引起多次震荡, 这样就与FCFS的性能相差不大.

### 可能原因2

学生所写的随机读取程序可能并发性能并不好, 同时发送给硬盘的访问指令很少, 并且在前面的访问指令完成之前后面的可能不能进行? 相比之下操作系统的优化可能更好?

## 5. RIAD

此题中只考虑寻道时间和磁头旋转时间.

### 5.1

$$4ms+1/(7200/60)*1000*(1/2)=8.3ms$$

i.e. raid读可以正常并行读.

### 5.2

必须等待读完成之后才能写, 一次数据更新需要两次读(原数据, 校验位)写(新数据, 校验位):

两次读和两次写可以并行完成

$$=2*(4ms+1/(7200/60)*1000)*(1/2)=16.6ms$$

### 5.3 连续数据块位于同一条带


可以一次性的读出这个条带上的所有信息, 然后一次性写回三个被修改的数据块. 读写操作可以并行执行.

$$2*(4ms+1/(7200/60)*1000)*(1/2)=16.6ms$$

### 5.3 连续数据块位于不同条带

**此题结果不确定**

需要进行两次读操作和两次写操作. 

观察题目中给出的排布图, 位于不同条带的两个连续数据块和校验位的分布如下图所示:

11|P2
-|-
P3|12

因此读出数据时需要至少两次读, 写回数据时也需要两次写.

$$2*2*(4ms+1/(7200/60)*1000)*(1/2)=33.2ms$$


---

Copyright (C) 2018 Wang Huaqiang